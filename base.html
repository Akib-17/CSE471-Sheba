<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Admin Panel{% endblock %}</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/admin_style.css') }}">
</head>
<body>
    <!-- Sidebar -->
    <div class="sidebar">
        <div class="sidebar-logo">
            <i class="fas fa-tools"></i> Admin Panel
        </div>
        <ul class="sidebar-menu">
            <li><a href="/admin/dashboard"><i class="fas fa-home"></i> Dashboard</a></li>
            <li><a href="/admin/promotions" class="{% block promotions_active %}{% endblock %}"><i class="fas fa-bullhorn"></i> Promotions</a></li>
            <li><a href="/admin/analytics" class="{% block analytics_active %}{% endblock %}"><i class="fas fa-chart-line"></i> Analytics</a></li>
            <li><a href="/admin/providers"><i class="fas fa-users"></i> Providers</a></li>
            <li><a href="/admin/settings"><i class="fas fa-cog"></i> Settings</a></li>
            <li><a href="/admin/logout"><i class="fas fa-sign-out-alt"></i> Logout</a></li>
        </ul>
    </div>

    <!-- Main Content -->
    <div class="main-content">
        {% block content %}{% endblock %}
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    {% block scripts %}{% endblock %}
</body>
</html>

<!-- ==========================================
FILE: templates/promotions.html
========================================== -->
{% extends "base.html" %}
{% block title %}Promotions Management{% endblock %}
{% block promotions_active %}active{% endblock %}

{% block content %}
<div class="header">
    <h1><i class="fas fa-bullhorn"></i> Promotion Management</h1>
    <button class="btn-custom btn-primary-custom" onclick="openCreateModal()">
        <i class="fas fa-plus"></i> Create Promotion
    </button>
</div>

<div class="stats-grid">
    <div class="stat-card">
        <div class="stat-icon" style="background: #e3f2fd; color: #2196f3;">
            <i class="fas fa-ad"></i>
        </div>
        <h3 id="total-promotions">0</h3>
        <p>Total Promotions</p>
    </div>
    <div class="stat-card">
        <div class="stat-icon" style="background: #e8f5e9; color: #4caf50;">
            <i class="fas fa-check-circle"></i>
        </div>
        <h3 id="active-promos">0</h3>
        <p>Active Campaigns</p>
    </div>
    <div class="stat-card">
        <div class="stat-icon" style="background: #fff3e0; color: #ff9800;">
            <i class="fas fa-eye"></i>
        </div>
        <h3 id="total-impressions">0</h3>
        <p>Total Impressions</p>
    </div>
    <div class="stat-card">
        <div class="stat-icon" style="background: #fce4ec; color: #e91e63;">
            <i class="fas fa-mouse-pointer"></i>
        </div>
        <h3 id="total-clicks">0</h3>
        <p>Total Clicks</p>
    </div>
</div>

<div class="card-custom">
    <div class="card-header-custom">
        <h2><i class="fas fa-list"></i> All Promotions</h2>
        <button class="btn-custom btn-primary-custom" onclick="loadPromotions()">
            <i class="fas fa-sync"></i> Refresh
        </button>
    </div>
    <div id="promotions-table">
        <div class="loading">
            <div class="spinner"></div>
        </div>
    </div>
</div>

<!-- Create Promotion Modal -->
<div id="createModal" class="modal">
    <div class="modal-content-custom">
        <span class="close-modal" onclick="closeCreateModal()">&times;</span>
        <h2 style="margin-bottom: 20px;"><i class="fas fa-plus-circle"></i> Create New Promotion</h2>
        <form id="promotionForm">
            <div class="form-group">
                <label for="provider-select">Service Provider *</label>
                <select id="provider-select" required>
                    <option value="">Select Provider</option>
                </select>
            </div>
            <div class="form-group">
                <label for="promo-type">Promotion Type *</label>
                <select id="promo-type" required>
                    <option value="">Select Type</option>
                    <option value="featured">Featured Listing</option>
                    <option value="banner">Banner Ad</option>
                </select>
            </div>
            <div class="form-group">
                <label for="promo-title">Title *</label>
                <input type="text" id="promo-title" placeholder="Enter promotion title" required>
            </div>
            <div class="form-group">
                <label for="promo-desc">Description</label>
                <textarea id="promo-desc" rows="3" placeholder="Enter promotion description"></textarea>
            </div>
            <div class="form-group">
                <label for="start-date">Start Date *</label>
                <input type="date" id="start-date" required>
            </div>
            <div class="form-group">
                <label for="end-date">End Date *</label>
                <input type="date" id="end-date" required>
            </div>
            <div class="form-group">
                <label for="promo-price">Price (৳) *</label>
                <input type="number" id="promo-price" placeholder="Enter price" min="0" step="0.01" required>
            </div>
            <button type="submit" class="btn-custom btn-primary-custom" style="width: 100%;">
                <i class="fas fa-save"></i> Create Promotion
            </button>
        </form>
    </div>
</div>

<script src="{{ url_for('static', filename='js/promotions.js') }}"></script>
{% endblock %}

<!-- ==========================================
FILE: templates/analytics.html
========================================== -->
{% extends "base.html" %}
{% block title %}Analytics & Reports{% endblock %}
{% block analytics_active %}active{% endblock %}

{% block content %}
<div class="header">
    <h1><i class="fas fa-chart-line"></i> Analytics & Reports</h1>
    <button class="btn-custom btn-primary-custom" onclick="exportReport()">
        <i class="fas fa-download"></i> Export Report
    </button>
</div>

<div class="stats-grid">
    <div class="stat-card">
        <div class="stat-icon" style="background: #e3f2fd; color: #2196f3;">
            <i class="fas fa-bookmark"></i>
        </div>
        <h3 id="total-bookings">0</h3>
        <p>Total Bookings</p>
    </div>
    <div class="stat-card">
        <div class="stat-icon" style="background: #e8f5e9; color: #4caf50;">
            <i class="fas fa-dollar-sign"></i>
        </div>
        <h3 id="total-revenue">৳0</h3>
        <p>Total Revenue</p>
    </div>
    <div class="stat-card">
        <div class="stat-icon" style="background: #fff3e0; color: #ff9800;">
            <i class="fas fa-users"></i>
        </div>
        <h3 id="total-providers">0</h3>
        <p>Service Providers</p>
    </div>
    <div class="stat-card">
        <div class="stat-icon" style="background: #fce4ec; color: #e91e63;">
            <i class="fas fa-ad"></i>
        </div>
        <h3 id="active-promotions">0</h3>
        <p>Active Promotions</p>
    </div>
</div>

<div class="card-custom">
    <div class="card-header-custom">
        <h2><i class="fas fa-chart-bar"></i> Most Booked Services</h2>
    </div>
    <div id="services-chart" class="chart-container">
        <canvas id="servicesCanvas"></canvas>
    </div>
</div>

<div class="card-custom">
    <div class="card-header-custom">
        <h2><i class="fas fa-star"></i> Top Rated Providers</h2>
    </div>
    <div id="providers-table">
        <div class="loading">
            <div class="spinner"></div>
        </div>
    </div>
</div>

<div class="card-custom">
    <div class="card-header-custom">
        <h2><i class="fas fa-chart-line"></i> Revenue Trends (Last 30 Days)</h2>
    </div>
    <div id="revenue-chart" class="chart-container">
        <canvas id="revenueCanvas"></canvas>
    </div>
</div>

<script src="{{ url_for('static', filename='js/analytics.js') }}"></script>
{% endblock %}